(function(n,f){"undefined"!=typeof module?module.exports=f():"function"==typeof define&&"object"==typeof define.amd?define(n,f):this.Buffer=f()})("browser-buffer",function(){function n(b){b=~~Math.ceil(+b);return 0>b?0:b}function f(b,a){if(!b)throw Error(a);}function t(b,a,c,d){var e=0;d||(f("boolean"===typeof c,"missing or invalid endian"),f(void 0!==a&&null!==a,"missing offset"),f(a+1<b.length,"Trying to read beyond buffer length"));c?(e=b[a]<<8,e|=b[a+1]):(e=b[a],e|=b[a+1]<<8);return e}function u(b,
a,c,d){var e=0;d||(f("boolean"===typeof c,"missing or invalid endian"),f(void 0!==a&&null!==a,"missing offset"),f(a+3<b.length,"Trying to read beyond buffer length"));c?(e=b[a+1]<<16,e|=b[a+2]<<8,e|=b[a+3],e+=b[a]<<24>>>0):(e=b[a+2]<<16,e|=b[a+1]<<8,e|=b[a],e+=b[a+3]<<24>>>0);return e}function y(b,a,c,d){d||(f("boolean"===typeof c,"missing or invalid endian"),f(void 0!==a&&null!==a,"missing offset"),f(a+1<b.length,"Trying to read beyond buffer length"));b=t(b,a,c,d);return b&32768?-1*(65535-b+1):
b}function z(b,a,c,d){d||(f("boolean"===typeof c,"missing or invalid endian"),f(void 0!==a&&null!==a,"missing offset"),f(a+3<b.length,"Trying to read beyond buffer length"));b=u(b,a,c,d);return b&2147483648?-1*(4294967295-b+1):b}function A(b,a,c,d,e){var f;f=8*e-d-1;var g=(1<<f)-1,B=g>>1,l=-7;e=c?0:e-1;var h=c?1:-1,k=b[a+e];e+=h;c=k&(1<<-l)-1;k>>=-l;for(l+=f;0<l;c=256*c+b[a+e],e+=h,l-=8);f=c&(1<<-l)-1;c>>=-l;for(l+=d;0<l;f=256*f+b[a+e],e+=h,l-=8);if(0===c)c=1-B;else{if(c===g)return f?NaN:Infinity*
(k?-1:1);f+=Math.pow(2,d);c-=B}return(k?-1:1)*f*Math.pow(2,c-d)}function C(b,a,c,d){d||(f("boolean"===typeof c,"missing or invalid endian"),f(a+3<b.length,"Trying to read beyond buffer length"));return A(b,a,c,23,4)}function D(b,a,c,d){d||(f("boolean"===typeof c,"missing or invalid endian"),f(a+7<b.length,"Trying to read beyond buffer length"));return A(b,a,c,52,8)}function v(b,a){f("number"==typeof b,"cannot write a non-number as a number");f(0<=b,"specified a negative value for writing an unsigned value");
f(b<=a,"value is larger than maximum value for type");f(Math.floor(b)===b,"value has a fractional component")}function m(b,a,c,d,e){e||(f(void 0!==a&&null!==a,"missing value"),f("boolean"===typeof d,"missing or invalid endian"),f(void 0!==c&&null!==c,"missing offset"),f(c+1<b.length,"trying to write beyond buffer length"),v(a,65535));d?(b[c]=(a&65280)>>>8,b[c+1]=a&255):(b[c+1]=(a&65280)>>>8,b[c]=a&255)}function p(b,a,c,d,e){e||(f(void 0!==a&&null!==a,"missing value"),f("boolean"===typeof d,"missing or invalid endian"),
f(void 0!==c&&null!==c,"missing offset"),f(c+3<b.length,"trying to write beyond buffer length"),v(a,4294967295));d?(b[c]=a>>>24&255,b[c+1]=a>>>16&255,b[c+2]=a>>>8&255,b[c+3]=a&255):(b[c+3]=a>>>24&255,b[c+2]=a>>>16&255,b[c+1]=a>>>8&255,b[c]=a&255)}function w(b,a,c){f("number"==typeof b,"cannot write a non-number as a number");f(b<=a,"value larger than maximum allowed value");f(b>=c,"value smaller than minimum allowed value");f(Math.floor(b)===b,"value has a fractional component")}function E(b,a,c){f("number"==
typeof b,"cannot write a non-number as a number");f(b<=a,"value larger than maximum allowed value");f(b>=c,"value smaller than minimum allowed value")}function F(b,a,c,d,e){e||(f(void 0!==a&&null!==a,"missing value"),f("boolean"===typeof d,"missing or invalid endian"),f(void 0!==c&&null!==c,"missing offset"),f(c+1<b.length,"Trying to write beyond buffer length"),w(a,32767,-32768));0<=a?m(b,a,c,d,e):m(b,65535+a+1,c,d,e)}function G(b,a,c,d,e){e||(f(void 0!==a&&null!==a,"missing value"),f("boolean"===
typeof d,"missing or invalid endian"),f(void 0!==c&&null!==c,"missing offset"),f(c+3<b.length,"Trying to write beyond buffer length"),w(a,2147483647,-2147483648));0<=a?p(b,a,c,d,e):p(b,4294967295+a+1,c,d,e)}function H(b,a,c,d,e,f){var g,h=8*f-e-1,l=(1<<h)-1,k=l>>1,n=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?f-1:0;var m=d?-1:1,p=0>a||0===a&&0>1/a?1:0;a=Math.abs(a);isNaN(a)||Infinity===a?(a=isNaN(a)?1:0,d=l):(d=Math.floor(Math.log(a)/Math.LN2),1>a*(g=Math.pow(2,-d))&&(d--,g*=2),a=1<=d+k?a+n/g:a+
n*Math.pow(2,1-k),2<=a*g&&(d++,g/=2),d+k>=l?(a=0,d=l):1<=d+k?(a=(a*g-1)*Math.pow(2,e),d+=k):(a=a*Math.pow(2,k-1)*Math.pow(2,e),d=0));for(;8<=e;b[c+f]=a&255,f+=m,a/=256,e-=8);d=d<<e|a;for(h+=e;0<h;b[c+f]=d&255,f+=m,d/=256,h-=8);b[c+f-m]|=128*p}function I(b,a,c,d,e){e||(f(void 0!==a&&null!==a,"missing value"),f("boolean"===typeof d,"missing or invalid endian"),f(void 0!==c&&null!==c,"missing offset"),f(c+3<b.length,"Trying to write beyond buffer length"),E(a,3.4028234663852886E38,-3.4028234663852886E38));
H(b,a,c,d,23,4)}function J(b,a,c,d,e){e||(f(void 0!==a&&null!==a,"missing value"),f("boolean"===typeof d,"missing or invalid endian"),f(void 0!==c&&null!==c,"missing offset"),f(c+7<b.length,"Trying to write beyond buffer length"),E(a,1.7976931348623157E308,-1.7976931348623157E308));H(b,a,c,d,52,8)}if("undefined"!==typeof window&&!h){var q=window.ArrayBuffer||function(b){for(this.length=b;b--;)this[b]=0},x=window.Uint8Array||function(b,a,c){this.buffer=b;this.offset=a;this.length=c};window.Uint8Array||
(x.prototype={get:function(b){return this.buffer[b+this.offset]},set:function(b,a){this.buffer[b+this.offset]=a}});var r=function(b,a,c){c=new x(b,a,c);c.parent=b;c.offset=a;return c},h=function(b,a,c){var d,e,f,g;if(b instanceof q)return r(b,c);if("number"===typeof c)e=n(a),f=b;else{switch(d=typeof b){case "number":e=n(b);break;case "string":e=h.byteLength(b,a);break;case "object":e=n(b.length);break;default:throw Error("First argument needs to be a number, array or string.");}if(this.length>h.poolSize)f=
new q(e),c=0;else{if(!k||k.byteLength-k.used<e)k=new q(h.poolSize),k.used=0;f=k;c=k.used;k.used+=e}if(h.isBuffer(b)||b&&"object"===typeof b&&"number"===typeof b.length)for(g=r(f,c,e),a=e;a--;)g[a]=b[a];else"string"==d&&(g=r(f,c,e),e=g.write(b,0,a))}return g||r(f,c,e)},g=h.prototype=x.prototype;g.toString=function(b,a,c){b=String(b||"utf8").toLowerCase();a=+a||0;"undefined"==typeof c&&(c=this.length);if(+c==a)return"";switch(b){case "hex":return this.hexSlice(a,c);case "utf8":case "utf-8":return this.utf8Slice(a,
c);case "ascii":return this.asciiSlice(a,c);case "base64":return this.base64Slice(a,c);default:throw Error("Unknown encoding");}};g.toJSON=function(){for(var b=[],a=0;a<this.length;a++)b[a]=this[a];return b};g.write=function(b,a,c,d){if(isFinite(a))isFinite(c)||(d=c,c=void 0);else{var e=d;d=a;a=c;c=e}a=+a||0;e=this.length-a;c?(c=+c,c>e&&(c=e)):c=e;d=String(d||"utf8").toLowerCase();switch(d){case "utf8":case "utf-8":return this.utf8Write(b,a,c);case "ascii":return this.asciiWrite(b,a,c);case "base64":return this.base64Write(b,
a,c);default:throw Error("Unknown encoding");}};var s=String.fromCharCode;g.utf8Write=function(b,a,c){var d=0,e=a,f=b.length;for(a=c-a;d<a&&d<f;d++)c=b.charCodeAt(d),128>c?this[e++]=c:(127<c&&2048>c?this[e++]=c>>6|192:(this[e++]=c>>12|224,this[e++]=c>>6&63|128),this[e++]=c&63|128);this._charsWritten=e;return f};g.utf8Slice=function(b,a){for(var c="",d,e=b,f=0,g,h;f<a&&(d=this[e]);e++)f++,128>d?c+=s(d):191<d&&224>d?(g=this[e+1],c+=s((d&31)<<6|g&63),e++):(g=this[e+1],h=this[e+2],c+=s((d&15)<<12|(g&
63)<<6|h&63),e+=2);return c};g.asciiWrite=function(b,a,c){for(var d=0,e=b.length;d<c&&d<e;d++)this[d+a]=b.charCodeAt(d);this._charsWritten=d;return e};g.asciiSlice=function(b,a){for(var c="",d=b;d<a;d++)c+=s(this[d]);return c};g.hexSlice=function(b,a){var c=this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;for(var d="",c=b;c<a;c++){var e;e=this[c];e=16>e?"0"+e.toString(16):e.toString(16);d+=e}return d};g.copy=function(b,a,c,d){var e=0;for(d-=c;e<d;e++)b[e+a]=this[e+c]};g.base64Slice=function(b,a){var c=
this.length;if(!b||0>b)b=0;if(!a||0>a||a>c)a=c;for(var c="",d=b;d<a;d++)c+=window.btoa(this[d]);return c};g.base64Write=function(b,a,c){for(var d=0,e=b.length;d<c&&d<e;d++)this[d+a]=window.atob(b.charCodeAt(d));this._charsWritten=d;return e};g.slice=function(b,a){return this.subarray(b,a)};g.toBlob=function(){var b=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);this.offset?b.append(this.toString("utf8")):b.append(this.buffer);return b.getBlob()};g.readUInt8=function(b,a){a||
(f(void 0!==b&&null!==b,"missing offset"),f(b<this.length,"Trying to read beyond buffer length"));return this[b]};g.readUInt16LE=function(b,a){return t(this,b,!1,a)};g.readUInt16BE=function(b,a){return t(this,b,!0,a)};g.readUInt32LE=function(b,a){return u(this,b,!1,a)};g.readUInt32BE=function(b,a){return u(this,b,!0,a)};g.readInt8=function(b,a){a||(f(void 0!==b&&null!==b,"missing offset"),f(b<this.length,"Trying to read beyond buffer length"));return this[b]&128?-1*(255-this[b]+1):this[b]};g.readInt16LE=
function(b,a){return y(this,b,!1,a)};g.readInt16BE=function(b,a){return y(this,b,!0,a)};g.readInt32LE=function(b,a){return z(this,b,!1,a)};g.readInt32BE=function(b,a){return z(this,b,!0,a)};g.readFloatLE=function(b,a){return C(this,b,!1,a)};g.readFloatBE=function(b,a){return C(this,b,!0,a)};g.readDoubleLE=function(b,a){return D(this,b,!1,a)};g.readDoubleBE=function(b,a){return D(this,b,!0,a)};g.writeUInt8=function(b,a,c){c||(f(void 0!==b&&null!==b,"missing value"),f(void 0!==a&&null!==a,"missing offset"),
f(a<this.length,"trying to write beyond buffer length"),v(b,255));this[a]=b};g.writeUInt16LE=function(b,a,c){m(this,b,a,!1,c)};g.writeUInt16BE=function(b,a,c){m(this,b,a,!0,c)};g.writeUInt32LE=function(b,a,c){p(this,b,a,!1,c)};g.writeUInt32BE=function(b,a,c){p(this,b,a,!0,c)};g.writeInt8=function(b,a,c){c||(f(void 0!==b&&null!==b,"missing value"),f(void 0!==a&&null!==a,"missing offset"),f(a<this.length,"Trying to write beyond buffer length"),w(b,127,-128));0<=b?this.writeUInt8(b,a,c):this.writeUInt8(255+
b+1,a,c)};g.writeInt16LE=function(b,a,c){F(this,b,a,!1,c)};g.writeInt16BE=function(b,a,c){F(this,b,a,!0,c)};g.writeInt32LE=function(b,a,c){G(this,b,a,!1,c)};g.writeInt32BE=function(b,a,c){G(this,b,a,!0,c)};g.writeFloatLE=function(b,a,c){I(this,b,a,!1,c)};g.writeFloatBE=function(b,a,c){I(this,b,a,!0,c)};g.writeDoubleLE=function(b,a,c){J(this,b,a,!1,c)};g.writeDoubleBE=function(b,a,c){J(this,b,a,!0,c)};var k;h.poolSize=8192;h.isBuffer=function(b){return b instanceof h||b instanceof q};h.byteLength=
function(b,a){switch(a){case "ascii":return b.length}for(var c=0,d=0,e=b.length,f;c<e;c++)f=b.charCodeAt(c),128>f?d++:d=127<f&&2048>f?d+2:d+3;return d};return h}});
